<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form onsubmit="postTodo(); return false">
            
           
        <b style="font-size: 22px; color:rgb(232, 223, 223) ; "><u><i>Enter:</i></u></b>
      <input id="todo" type="text" style="width: 75% ; margin-right: 15px; padding: 18px ; box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);" placeholder="New Task.." >
        <button type="submit">Add</button><center>
          
      </form>

      <button onclick="getAllTodos()">Refresh</button>
      <button onclick="getDelete()" style="width: 12% ; ">Delete All</button>
  
      <h3 id="result"> </h3>
     
  </center>


  <script>

// let api = 'https://shy-gold-gorilla-sock.cyclic.app/'

      function postTodo() {
          let todoText = document.querySelector("#todo").value

          axios.post(`localhost:3000/todo`, {
              text: todoText
          })
              .then(function (response) {
                  console.log(response.data);

                  document.querySelector("#result").innerHTML = ""

                  response.data.data.map(eachTodo => {
                      document.querySelector("#result").innerHTML += eachTodo
                      document.querySelector("#result").innerHTML += '<br>'
                  })

              })
              .catch(function (error) {
                  console.log(error);
              })

      }

      function getAllTodos() {
          axios.get(`localhost:3000/todos`)
              .then(function (response) {
                  console.log(response.data);

                  document.querySelector("#result").innerHTML = ""

                  response.data.data.map(eachTodo => {
                      document.querySelector("#result").innerHTML = eachTodo +  document.querySelector("#result").innerHTML
                      document.querySelector("#result").innerHTML = '<br>' + document.querySelector("#result").innerHTML 
                  })

              })
              .catch(function (error) {
                  console.log(error);
              })
      }
      

setInterval(getAllTodos, 700);

      function getDelete() {
       
                  
          let code = prompt("Enter Password ")
          if (code === "123") {
              axios.delete('localhost:3000/del')
          .then(function (response) {
                  console.log(response.data);
          
              })    
              .catch((error) => {
              console.log(error)
          })}
      
      }
  
  </script>

</body>
</html>